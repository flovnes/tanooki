<li class="flex items-center pb-4 hover:scale-[1.015] transition-all duration-300">
  <%= link_to fiction_path(reading.fiction), data: { turbo: false }, class: '' do %>
    <%= image_tag url_for(reading.fiction.cover),
      alt: reading.fiction.cover.blob.filename.to_s,
      class: "w-24 h-32 rounded mr-4 object-cover rounded-md shadow-sm border border-cyan-700 dark:border-rose-700",
      loading: "lazy",
      data: {
        controller: "lazy-image",
        lazy_image_target: "image",
        lazy_image_url_value: url_for(reading.fiction.cover)
      } %>
  <% end %>
  <div class="flex-1 tracking-tight">
    <div class="flex justify-between gap-3">
      <%= link_to reading.fiction.title, fiction_path(reading.fiction), data: { turbo: false }, class: 'leading-tight text-xs md:text-base font-semibold text-stone-800 dark:text-gray-200 line-clamp-2 hover:text-cyan-700 dark:hover:text-rose-700 transition-colors duration-300 tracking-tight' %>
    </div>
    <div class="text-xs text-stone-800 dark:text-gray-200 flex gap-1 mt-2 font-light">
      <span class="">Прочитано:</span>
      <%= tag.span chapter_index(unique_chapters(ordered_chapters(reading.fiction)), reading.chapter) + 1, class: 'font-bold' %> /
      <%= tag.span chapters_size(reading.fiction) %>
    </div>
    <div class="flex gap-4 mt-4">
      <% if defined?(section) && section == :finished %>
        <span class="shadow-sm ring-1 ring-green-800 dark:ring-green-800 inline-flex items-center gap-1 text-xs bg-green-700 dark:bg-green-700 text-white dark:text-gray-100 font-bold py-1 px-2 sm:px-4 rounded-xl">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"/>
          </svg>
          <span>Все прочитано</span>
        </span>
      <% else %>
        <%= link_to following_chapter(reading.fiction, reading.chapter), data: { turbo: false }, class: 'shadow-sm ring-1 ring-cyan-800 dark:ring-rose-800 inline-flex items-center gap-1 text-xs bg-cyan-700 dark:bg-rose-700 text-white dark:text-gray-100 font-bold py-1 px-2 sm:px-4 rounded-xl hover:bg-cyan-800 dark:hover:bg-rose-800 transition duration-300' do %>
          <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
            <path d="M9 4.804A7.968 7.968 0 005.5 4c-1.255 0-2.443.29-3.5.804v10A7.969 7.969 0 015.5 14c1.669 0 3.218.51 4.5 1.385A7.962 7.962 0 0114.5 14c1.255 0 2.443.29 3.5.804v-10A7.968 7.968 0 0014.5 4c-1.255 0-2.443.29-3.5.804V12a1 1 0 11-2 0V4.804z"/>
          </svg>
          <span>Читати далі</span>
        <% end %>
      <% end %>
    </div>
  </div>
</li>
